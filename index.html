<!DOCTYPE html>
<html>
  <head>
    <title>colorcat.js</title>
    <style>
      #selection-box {
        width: 10px;
        height: 10px;
        border: 5px solid black;
        position: absolute;
        display: none;
      }
    </style>
  </head>
  <body>
    <canvas id="pixel-canvas" width="100" height="100"></canvas>
    <div id="selection-box"></div>
    <br>
    <label for="color-picker">Selecciona un color:</label>
    <input type="color" id="color-picker">
    <button onclick="paintPixel()">Pintar</button>
    <br>
    <button onclick="saveImage()">Guardar imagen</button>
    
    <script>
      // Obtener el canvas y el contexto
      var canvas = document.getElementById("pixel-canvas");
      var context = canvas.getContext("2d");
      
      // Dibujar el pixel inicialmente en blanco
      context.fillStyle = "#FFFFFF";
      context.fillRect(0, 0, 100, 100);
      
      // Obtener el cuadro de selección
      var selectionBox = document.getElementById("selection-box");
      
      // Función para actualizar la posición del cuadro de selección
      function updateSelectionBox(event) {
        selectionBox.style.left = event.pageX - 5 + "px";
        selectionBox.style.top = event.pageY - 5 + "px";
        selectionBox.style.display = "block";
      }
      
      // Función para ocultar el cuadro de selección
      function hideSelectionBox() {
        selectionBox.style.display = "none";
      }
      
      // Función para pintar el pixel seleccionado
      function paintPixel() {
        var colorPicker = document.getElementById("color-picker");
        var color = colorPicker.value;
        
        // Obtener la posición del cuadro de selección
        var rect = canvas.getBoundingClientRect();
        var x = selectionBox.offsetLeft - rect.left;
        var y = selectionBox.offsetTop - rect.top;
        
        // Dibujar el pixel con el nuevo color
        context.fillStyle = color;
        context.fillRect(x, y, 1, 1);
        
        // Ocultar el cuadro de selección
        hideSelectionBox();
      }
      
      // Función para guardar una imagen del canvas
      function saveImage() {
        var link = document.createElement("a");
        link.download = "canvas.png";
        link.href = canvas.toDataURL("image/png");
        link.click();
      }
      
      // Asignar los eventos de ratón al canvas
      canvas.addEventListener("mousedown", updateSelectionBox);
      canvas.addEventListener("mouseup", paintPixel);
      canvas.addEventListener("mousemove", updateSelectionBox);
      canvas.addEventListener("mouseleave", hideSelectionBox);
    </script>
  </body>
</html>
